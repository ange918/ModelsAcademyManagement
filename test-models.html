<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mod√®les - Models Academy</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .test-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .test-header { text-align: center; margin-bottom: 30px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .model-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .model-card { border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: white; }
        .model-image { width: 100%; height: 200px; object-fit: cover; }
        .model-details { padding: 15px; }
        .model-name { font-size: 1.2em; font-weight: bold; margin-bottom: 10px; }
        .model-specialty { color: #666; margin-bottom: 10px; }
        .model-measurements { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .measurement { display: flex; justify-content: space-between; }
        .measurement .label { font-weight: bold; }
        .lucia-highlight { border: 3px solid #28a745; box-shadow: 0 0 10px rgba(40, 167, 69, 0.3); }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ Test des Mod√®les - Models Academy</h1>
            <p>Page de test pour v√©rifier l'affichage des mod√®les et diagnostiquer les probl√®mes</p>
        </div>
        
        <div class="test-section info">
            <h2>üìã Instructions de Test</h2>
            <p>Cette page teste le chargement et l'affichage des mod√®les. V√©rifiez que :</p>
            <ul>
                <li>‚úÖ Lucia Padanou s'affiche en premier</li>
                <li>‚úÖ Ses informations sont correctes (nom, ville, mesures)</li>
                <li>‚úÖ Son image se charge correctement</li>
                <li>‚úÖ Les autres mod√®les s'affichent aussi</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>üîç Diagnostic du Chargement</h2>
            <div id="loading-status">Chargement en cours...</div>
        </div>
        
        <div class="test-section">
            <h2>üëó Affichage des Mod√®les</h2>
            <div id="models-display">Chargement des mod√®les...</div>
        </div>
        
        <div class="test-section">
            <h2>üìä Informations Techniques</h2>
            <div id="tech-info"></div>
        </div>
    </div>

    <script>
        // Fonction de test des mod√®les
        async function testModels() {
            const loadingStatus = document.getElementById('loading-status');
            const modelsDisplay = document.getElementById('models-display');
            const techInfo = document.getElementById('tech-info');
            
            try {
                loadingStatus.innerHTML = '<p>üîÑ Tentative de chargement du fichier JSON...</p>';
                
                // Essayer de charger le JSON
                let data;
                let source = 'JSON';
                
                try {
                    const response = await fetch('data/models.json');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    data = await response.json();
                    loadingStatus.innerHTML = `
                        <div class="success">
                            <h3>‚úÖ Succ√®s!</h3>
                            <p>Fichier JSON charg√© depuis: ${response.url}</p>
                            <p>Nombre de mod√®les: ${data.models.length}</p>
                            <p>Premier mod√®le: ${data.models[0].name}</p>
                        </div>
                    `;
                    
                } catch (fetchError) {
                    console.error('Erreur JSON:', fetchError);
                    loadingStatus.innerHTML = `
                        <div class="error">
                            <h3>‚ùå Erreur JSON</h3>
                            <p>Impossible de charger le fichier JSON: ${fetchError.message}</p>
                            <p>Utilisation des donn√©es int√©gr√©es...</p>
                        </div>
                    `;
                    
                    // Utiliser les donn√©es int√©gr√©es
                    data = getEmbeddedModelsData();
                    source = 'Int√©gr√©';
                }
                
                // V√©rifier la structure
                if (!data.models || !Array.isArray(data.models)) {
                    throw new Error('Structure de donn√©es invalide');
                }
                
                // V√©rifier que Lucia est pr√©sente
                const lucia = data.models.find(m => 
                    m.name.toLowerCase().includes('lucia') || 
                    m.name.toLowerCase().includes('padanou') ||
                    m.name.toLowerCase().includes('padonou')
                );
                
                if (lucia) {
                    console.log('‚úÖ Lucia trouv√©e:', lucia);
                    
                    // S'assurer que Lucia est en premi√®re position
                    const luciaIndex = data.models.findIndex(m => m.id === lucia.id);
                    if (luciaIndex > 0) {
                        const luciaModel = data.models.splice(luciaIndex, 1)[0];
                        data.models.unshift(luciaModel);
                        console.log('üîÑ Lucia d√©plac√©e en premi√®re position');
                    }
                } else {
                    console.log('‚ö†Ô∏è Lucia non trouv√©e dans les donn√©es');
                }
                
                // Afficher les mod√®les
                displayModels(data.models, source);
                
                // Informations techniques
                techInfo.innerHTML = `
                    <div class="info">
                        <h3>üìä Informations Techniques</h3>
                        <p><strong>Source des donn√©es:</strong> ${source}</p>
                        <p><strong>Nombre total de mod√®les:</strong> ${data.models.length}</p>
                        <p><strong>Premier mod√®le:</strong> ${data.models[0].name} (ID: ${data.models[0].id})</p>
                        <p><strong>Lucia pr√©sente:</strong> ${lucia ? '‚úÖ Oui' : '‚ùå Non'}</p>
                        <p><strong>Position de Lucia:</strong> ${lucia ? data.models.findIndex(m => m.id === lucia.id) + 1 : 'N/A'}</p>
                        <p><strong>Timestamp:</strong> ${new Date().toLocaleString()}</p>
                    </div>
                `;
                
            } catch (error) {
                console.error('Erreur g√©n√©rale:', error);
                loadingStatus.innerHTML = `
                    <div class="error">
                        <h3>‚ùå Erreur G√©n√©rale</h3>
                        <p>Erreur: ${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Fonction d'affichage des mod√®les
        function displayModels(models, source) {
            const displayDiv = document.getElementById('models-display');
            
            let html = `
                <div class="info">
                    <h3>üìã Mod√®les charg√©s depuis: ${source}</h3>
                    <p>Nombre de mod√®les: ${models.length}</p>
                </div>
                <div class="model-grid">
            `;
            
            models.forEach((model, index) => {
                const isLucia = model.name.toLowerCase().includes('lucia') || 
                               model.name.toLowerCase().includes('padanou') ||
                               model.name.toLowerCase().includes('padonou');
                
                const cardClass = isLucia ? 'model-card lucia-highlight' : 'model-card';
                
                html += `
                    <div class="${cardClass}">
                        <img src="${model.image}" alt="${model.name}" class="model-image" 
                             onerror="this.src='images/model-1.svg'; this.style.border='2px solid #dc3545'">
                        <div class="model-details">
                            <div class="model-name">${model.name} ${isLucia ? 'üåü' : ''}</div>
                            <div class="model-specialty">${model.specialty}</div>
                            <div class="model-measurements">
                                <div class="measurement">
                                    <span class="label">Taille:</span>
                                    <span class="value">${model.height}</span>
                                </div>
                                <div class="measurement">
                                    <span class="label">${model.gender === 'Femme' ? 'Buste:' : 'Poitrine:'}</span>
                                    <span class="value">${model.gender === 'Femme' ? model.bust : model.chest}</span>
                                </div>
                                <div class="measurement">
                                    <span class="label">Taille:</span>
                                    <span class="value">${model.waist}</span>
                                </div>
                                <div class="measurement">
                                    <span class="label">${model.gender === 'Femme' ? 'Hanche:' : 'Chaussure:'}</span>
                                    <span class="value">${model.gender === 'Femme' ? model.hips : model.shoeSize}</span>
                                </div>
                            </div>
                            <div><strong>Ville:</strong> ${model.city}</div>
                            <div><strong>Exp√©rience:</strong> ${model.experience}</div>
                            <div><strong>Langues:</strong> ${model.languages.join(', ')}</div>
                            <div><strong>ID:</strong> ${model.id} | <strong>Position:</strong> ${index + 1}</div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            displayDiv.innerHTML = html;
        }
        
        // Donn√©es int√©gr√©es de fallback
        function getEmbeddedModelsData() {
            return {
                "models": [
                    {
                        "id": 1,
                        "name": "Lucia Padanou",
                        "gender": "Femme",
                        "specialty": "Fashion & Haute Couture",
                        "height": "1.80m",
                        "bust": "85cm",
                        "waist": "60cm",
                        "hips": "88cm",
                        "shoeSize": "38 EU",
                        "hairColor": "Noir",
                        "eyeColor": "Marron",
                        "city": "Cotonou",
                        "experience": "3 ans",
                        "languages": ["Francais", "Anglais"],
                        "image": "images/gallery/luciapola.jpg",
                        "description": "Mannequin talentueuse de Cotonou, sp√©cialis√©e dans la haute couture avec une √©l√©gance naturelle et une pr√©sence sc√©nique remarquable",
                        "gallery": [
                            "images/gallery/luciapola.jpg",
                            "images/gallery/shoot.jpg",
                            "images/gallery/shoot2.jpg",
                            "images/gallery/shoot3.jpg"
                        ]
                    },
                    {
                        "id": 2,
                        "name": "Sophia Laurent",
                        "gender": "Femme",
                        "specialty": "Fashion & Haute Couture",
                        "height": "1.78m",
                        "bust": "86cm",
                        "waist": "60cm",
                        "hips": "88cm",
                        "shoeSize": "38 EU",
                        "hairColor": "Chataign",
                        "eyeColor": "Noisette",
                        "city": "Paris",
                        "experience": "8 ans",
                        "languages": ["Francais", "Anglais", "Italien"],
                        "image": "images/model-2.svg",
                        "description": "Specialisee dans la haute couture parisienne avec une elegance naturelle",
                        "gallery": [
                            "images/gallery/sophia-1.jpg",
                            "images/gallery/sophia-2.jpg",
                            "images/gallery/sophia-3.jpg"
                        ]
                    }
                ]
            };
        }
        
        // Lancer le test au chargement de la page
        window.addEventListener('load', testModels);
    </script>
</body>
</html>
